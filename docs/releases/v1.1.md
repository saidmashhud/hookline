# GatePulse v1.1 — Hardening & DX

## Highlights

- **Backpressure & overload protection**: 413 on payloads > 512 KB, 429 + `Retry-After` when queue exceeds `GP_MAX_QUEUE_DEPTH`
- **Admin API**: `GET /v1/admin/stats`, `POST /v1/admin/compact`, pause/resume job claiming
- **Backup & restore CLI**: `gp store snapshot create` / `gp store snapshot restore` with safe pause/rsync/resume
- **Grafana dashboard**: `grafana/dashboards/gatepulse.json` — 11 panels covering throughput, latency, DLQ, SSE, and more
- **Prometheus alert rules**: `prometheus/alerts.yml` — DLQ, queue depth, failure rate, P99 latency
- **CLI tools**: `gp init`, `gp doctor`, `gp tail`
- **SDKs**: JavaScript (`sdk/js/`) and Python (`sdk/python/`) with `publishEvent`, `verifySignature`, and typed clients
- **Docs**: Production checklist, backup guide, webhook consumer guide

## Breaking Changes

None. All `/v1` endpoints remain backward-compatible.

## New Environment Variables

| Variable | Default | Description |
|----------|---------|-------------|
| `GP_MAX_PAYLOAD_BYTES` | `524288` | Max event body size (512 KB) |
| `GP_MAX_QUEUE_DEPTH` | `100000` | Per-tenant queue depth before 429 |
| `GP_MAX_INFLIGHT_GLOBAL` | `500` | Global in-flight delivery cap |
| `GP_COMPACTION_INTERVAL_SECS` | `3600` | Segment compaction frequency |

## New API Endpoints

| Method | Path | Description |
|--------|------|-------------|
| `GET` | `/v1/admin/stats` | Queue depth, inflight, compaction stats |
| `POST` | `/v1/admin/compact` | Trigger manual compaction |
| `POST` | `/v1/admin/store/pause-claims` | Pause delivery poller (for backup) |
| `POST` | `/v1/admin/store/resume-claims` | Resume delivery poller |

## Upgrade Notes

No migration required. Drop-in replacement for v1.0.
