# Default values for gatepulse

replicaCount: 2

image:
  repository: gatepulse/gatepulse
  pullPolicy: IfNotPresent
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# API server configuration
api:
  port: 8080
  listenAddr: "0.0.0.0"

# Authentication
auth:
  apiKey: "dev-secret"
  tenantId: "default"
  singleTenant: true

# Delivery settings
delivery:
  workers: 16
  maxQueueDepth: 100000
  maxPayloadBytes: 524288

# Retention
retention:
  secs: 604800  # 7 days
  compactIntervalMs: 3600000  # 1 hour

# Store daemon (runs as sidecar)
store:
  socketPath: "/tmp/gp_store.sock"
  poolSize: 8
  dataDir: "/var/lib/gatepulse"

# Persistent volume for store data
persistence:
  enabled: true
  storageClass: ""
  size: 50Gi
  accessMode: ReadWriteOnce

service:
  type: ClusterIP
  port: 8080

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: gatepulse.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []

resources:
  api:
    requests:
      cpu: 250m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  store:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80

nodeSelector: {}
tolerations: []
affinity: {}

# Optional: Erlang cluster cookie for multi-node
cluster:
  enabled: false
  cookie: "gatepulse-secret-cookie"
